AUI.add("aui-form-textarea",function(C){var F=C.Lang,D=C.ClassNameManager.getClassName,M="textarea",J=D(M),E=[D(M,"height","monitor"),D("field","text","input"),D("helper","hidden","accessible")].join(" "),N="&nbsp;&nbsp;",K="&nbsp;\n&nbsp;",B='<pre class="'+E+'">',L="</pre>",I='<textarea autocomplete="off" class="{cssClass}" name="{name}"></textarea>';var G=function(){G.superclass.constructor.apply(this,arguments);};G.NAME=M;var H=G.prototype;G.ATTRS={autoSize:{value:true},height:{value:"auto"},maxHeight:{value:1000,setter:H._setAutoDimension},minHeight:{value:45,setter:H._setAutoDimension},width:{value:"auto",setter:H._setAutoDimension}};G.HTML_PARSER={node:"textarea"};C.extend(G,C.Textfield,{FIELD_TEMPLATE:I,renderUI:function(){var A=this;G.superclass.renderUI.call(A);if(A.get("autoSize")){A._renderHeightMonitor();}},bindUI:function(){var A=this;G.superclass.bindUI.call(A);if(A.get("autoSize")){A.get("node").on("keyup",A._onKeyup,A);}A.after("adjustSize",A._uiAutoSize);A.after("heightChange",A._afterHeightChange);A.after("widthChange",A._afterWidthChange);},syncUI:function(){var O=this;G.superclass.syncUI.call(O);O._setAutoDimension(O.get("minHeight"),"minHeight");O._setAutoDimension(O.get("maxHeight"),"maxHeight");var P=O.get("width");var A=O.get("minHeight");O._setAutoDimension(P,"width");O._uiSetDim("height",A);O._uiSetDim("width",P);},_afterHeightChange:function(O){var A=this;A._uiSetDim("height",O.newVal,O.prevVal);},_afterWidthChange:function(O){var A=this;A._uiSetDim("width",O.newVal,O.prevVal);},_onKeyup:function(O){var A=this;A.fire("adjustSize");},_renderHeightMonitor:function(){var O=this;var Q=C.Node.create(B+L);var S=O.get("node");C.getBody().append(Q);O._heightMonitor=Q;var A=S.getComputedStyle("fontFamily");var T=S.getComputedStyle("fontSize");var P=S.getComputedStyle("fontWeight");var R=S.getComputedStyle("fontSize");S.setStyle("height",O.get("minHeight")+"px");Q.setStyles({fontFamily:A,fontSize:T,fontWeight:P});if("outerHTML" in Q.getDOM()){O._updateContent=O._updateOuterContent;}else{O._updateContent=O._updateInnerContent;}},_setAutoDimension:function(P,O){var A=this;A["_"+O]=P;},_uiAutoSize:function(){var O=this;var S=O.get("node");var P=O._heightMonitor;var T=O._minHeight;var R=O._maxHeight;var Q=S.val();var U=document.createTextNode(Q);P.set("innerHTML","");P.appendChild(U);P.setStyle("width",S.getComputedStyle("width"));Q=P.get("innerHTML");if(!Q.length){Q=N;}else{Q+=K;}O._updateContent(Q);var A=Math.max(P.get("offsetHeight"),T);A=Math.min(A,R);if(A!=O._lastHeight){O._lastHeight=A;O._uiSetDim("height",A);}},_uiSetDim:function(P,O){var A=this;var Q=A.get("node");if(F.isNumber(O)){O+="px";}Q.setStyle(P,O);},_updateInnerContent:function(O){var A=this;return A._heightMonitor.set("innerHTML",O);},_updateOuterContent:function(O){var A=this;O=O.replace(/\n/g,"<br />");return A._updateInnerContent(O);}});C.Textarea=G;},"1.0pr",{requires:["aui-form-textfield"],skinnable:true});