AUI.add("aui-form-field",function(R){var H=R.Lang,K=R.ClassNameManager.getClassName,I="field",T=R.cached(function(Z,b){var a=["field"];if(b){a.push(b);}a=a.join("-");var A=[K(a,Z)];if(Z=="password"){A.push(K(a,"text"));}return A.join(" ");}),D=K(I),Y=K(I,"content"),G=K(I,"input"),P=K(I,"hint"),F=K(I,"invalid"),E=K(I,"label"),C=K(I,"labels"),X=K(I,"labels","inline"),V={left:[C,"left"].join("-"),right:[C,"right"].join("-"),top:[C,"top"].join("-")},M=/left|right/,S='<span class="'+D+'"></span>',W='<span class="'+Y+'"></span>',L='<span class="'+P+'"></span>',Q='<input autocomplete="off" class="{cssClass}" id="{id}" name="{name}" type="{type}" />',N='<label class="'+E+'"></label>',U={};var J=function(){J.superclass.constructor.apply(this,arguments);};var B=J.prototype;J.NAME=I;J.ATTRS={readOnly:{value:false},name:{value:"",getter:function(Z){var A=this;return Z||A.get("id");}},id:{getter:function(a){var A=this;var Z=this.get("node");if(Z){a=Z.get("id");}if(!a){a=R.guid();}return a;}},type:{value:"text",writeOnce:true},labelAlign:{value:""},labelNode:{valueFn:function(){var A=this;return R.Node.create(N);}},labelText:{valueFn:function(){var A=this;return A.get("labelNode").get("innerHTML");},setter:function(Z){var A=this;A.get("labelNode").set("innerHTML",Z);return Z;}},node:{value:null,setter:function(Z){var A=this;return R.get(Z)||A._createFieldNode();}},fieldHint:{value:""},fieldHintNode:{value:null,setter:function(Z){var A=this;return R.get(Z)||A._createFieldHint();}},prevVal:{value:""},valid:{value:true,getter:function(b){var A=this;var Z=A.get("validator");var a=A.get("disabled")||Z(A.get("value"));return a;}},dirty:{value:false,getter:function(a){var A=this;if(A.get("disabled")){a=false;}else{var Z=String(A.get("value"));var b=String(A.get("prevVal"));a=(Z!==b);}return a;}},size:{},validator:{valueFn:function(){var A=this;return A.fieldValidator;},validator:H.isFunction},value:{getter:"_getNodeValue",setter:"_setNodeValue",validator:J.prototype.fieldValidator}};J.HTML_PARSER={labelNode:"label",node:"input, textarea, select"};J.getTypeClassName=T;var O=R.Component.prototype._BIND_UI_ATTRS;O=O.concat(["id","readOnly","name","size","tabIndex","type","value"]);R.extend(J,R.Component,{_BIND_UI_ATTRS:O,BOUNDING_TEMPLATE:S,CONTENT_TEMPLATE:W,FIELD_TEMPLATE:Q,FIELD_TYPE:"text",initializer:function(){var A=this;var Z=A.get("node").guid();U[Z]=A;},renderUI:function(){var A=this;A._renderField();A._renderLabel();A._renderFieldHint();},bindUI:function(){var A=this;A.after("labelAlignChange",A._afterLabelAlignChange);A.after("fieldHintChange",A._afterFieldHintChange);},syncUI:function(){var A=this;A.set("prevVal",A.get("value"));},fieldValidator:function(Z){var A=this;return true;},isValid:function(){var A=this;return A.get("valid");},isDirty:function(){var A=this;return A.get("dirty");},resetValue:function(){var A=this;A.set("value",A.get("prevVal"));A.clearInvalid();},markInvalid:function(Z){var A=this;A.set("fieldHint",Z);A.get("fieldHintNode").show();A.get("boundingBox").addClass(F);},clearInvalid:function(){var A=this;A.reset("fieldHint");if(!A.get("fieldHint")){A.get("fieldHintNode").hide();}A.get("boundingBox").removeClass(F);},validate:function(){var A=this;var Z=A.get("valid");if(Z){A.clearInvalid();}return Z;},_afterFieldHintChange:function(Z){var A=this;A._uiSetFieldHint(Z.newVal,Z.prevVal);},_afterLabelAlignChange:function(Z){var A=this;A._uiSetLabelAlign(Z.newVal,Z.prevVal);},_createFieldHint:function(){var A=this;var Z=R.Node.create(L);A.get("contentBox").append(Z);return Z;},_createFieldNode:function(){var A=this;var Z=A.FIELD_TEMPLATE;A.FIELD_TEMPLATE=R.substitute(Z,{cssClass:G,id:A.get("id"),name:A.get("name"),type:A.get("type")});return R.Node.create(A.FIELD_TEMPLATE);},_getNodeValue:function(){var A=this;return A.get("node").val();},_renderField:function(){var A=this;var c=A.get("node");c.val(A.get("value"));var a=A.get("boundingBox");var Z=A.get("contentBox");var b=A.get("type");a.addClass(T(b));c.addClass(T(b,"input"));if(!Z.contains(c)){if(c.inDoc()){c.placeBefore(a);Z.appendChild(c);}else{Z.appendChild(c);}}a.removeAttribute("tabIndex");},_renderFieldHint:function(){var A=this;var Z=A.get("fieldHint");if(Z){A._uiSetFieldHint(Z);}},_renderLabel:function(){var A=this;var c=A.get("labelText");if(c!==false){var b=A.get("node");var d=b.guid();c=A.get("labelText");var a=A.get("labelNode");a.addClass(K(A.name,"label"));a.setAttribute("for",d);a.set("innerHTML",c);A._uiSetLabelAlign(A.get("labelAlign"));var Z=A.get("contentBox");Z.prepend(a);}},_setNodeValue:function(Z){var A=this;A._uiSetValue(Z);return Z;},_uiSetFieldHint:function(Z,a){var A=this;A.get("fieldHintNode").set("innerHTML",Z);},_uiSetId:function(Z,a){var A=this;A.get("node").set("id",Z);},_uiSetLabelAlign:function(a,c){var A=this;var Z=A.get("boundingBox");Z.replaceClass(V[c],V[a]);var b="removeClass";if(M.test(a)){b="addClass";}Z[b](X);},_uiSetName:function(Z,a){var A=this;A.get("node").setAttribute("name",Z);},_uiSetReadOnly:function(Z,a){var A=this;A.get("node").setAttribute("readOnly",Z);},_uiSetSize:function(Z,a){var A=this;A.get("node").setAttribute("size",Z);},_uiSetTabIndex:function(Z,a){var A=this;A.get("node").setAttribute("tabIndex",Z);},_uiSetValue:function(Z,a){var A=this;A.get("node").val(Z);},_requireAddAttr:false});J.getField=function(b){var c=null;if(b instanceof R.Field){c=b;}else{if(b&&(H.isString(b)||b instanceof R.Node||b.nodeName)){var Z=R.get(b).get("id");c=U[Z];if(!c){var a=b.ancestor(".aui-field");var A=b.ancestor(".aui-field-content");c=new J({boundingBox:a,contentBox:A,node:b});}}else{if(H.isObject(b)){c=new J(b);}}}return c;};R.Field=J;},"1.0pr",{requires:["aui-base","aui-component","substitute"]});