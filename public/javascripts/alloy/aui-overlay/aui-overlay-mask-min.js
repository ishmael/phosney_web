AUI.add("aui-overlay-mask",function(S){var H=S.Lang,M=H.isArray,N=H.isString,P=H.isNumber,W=H.isValue,Q=S.UA,C=false,J=false,F=(Q.ie&&Q.version.major<=6),a="absolute",G="alignPoints",Y="background",Z="boundingBox",O="contentBox",V="fixed",T="height",B="offsetHeight",I="offsetWidth",U="opacity",X="overlaymask",R="position",K="target",D="width";function E(A){E.superclass.constructor.apply(this,arguments);}S.mix(E,{NAME:X,ATTRS:{alignPoints:{value:["tl","tl"],validator:M},background:{lazyAdd:false,value:null,validator:N,setter:function(A){if(A){this.get(O).setStyle(Y,A);}return A;}},target:{lazyAdd:false,value:document,setter:function(A){var L=S.get(A);C=L.compareTo(document);J=L.compareTo(window);return L;}},opacity:{value:0.5,validator:P,setter:function(A){return this._setOpacity(A);}},shim:{value:S.UA.ie},visible:{value:false},zIndex:{value:1000}}});S.extend(E,S.OverlayBase,{bindUI:function(){var A=this;E.superclass.bindUI.apply(this,arguments);A.after("targetChange",A._afterTargetChange);A.after("visibleChange",A._afterVisibleChange);S.on("windowresize",S.bind(A.refreshMask,A));},syncUI:function(){var A=this;A.refreshMask();},getTargetSize:function(){var L=this;var c=L.get(K);var A=c.get(B);var b=c.get(I);if(F){if(J){b=S.DOM.winWidth();A=S.DOM.winHeight();}else{if(C){b=S.DOM.docWidth();A=S.DOM.docHeight();}}}else{if(C||J){A="100%";b="100%";}}return{height:A,width:b};},refreshMask:function(){var L=this;var g=L.get(G);var f=L.get(K);var c=L.get(Z);var e=L.getTargetSize();var b=(C||J);c.setStyles({position:(F||!b)?a:V,left:0,top:0});var A=e.height;var d=e.width;if(W(A)){L.set(T,A);}if(W(d)){L.set(D,d);}if(!b){L.align(f,g);}},_setOpacity:function(L){var A=this;A.get(O).setStyle(U,L);return L;},_uiSetVisible:function(L){var A=this;E.superclass._uiSetVisible.apply(this,arguments);if(L){A._setOpacity(A.get(U));}},_afterTargetChange:function(L){var A=this;A.refreshMask();},_afterVisibleChange:function(L){var A=this;A._uiSetVisible(L.newVal);}});S.OverlayMask=E;},"1.0pr",{requires:["aui-base","aui-overlay-base","event-resize"],skinnable:true});