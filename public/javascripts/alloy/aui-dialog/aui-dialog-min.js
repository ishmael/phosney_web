AUI.add("aui-dialog",function(S){var M=S.Lang,i=M.isBoolean,c=M.isArray,m=M.isObject,X="",O="bodyContent",q="boundingBox",u="button",E="buttons",r="close",j="constrain2view",C="container",F="dd",n="default",s="destroyOnClose",Z="dialog",a=".",P="draggable",N="dragInstance",I="footerContent",o="hd",h="height",f="icon",D="icons",V="io",Y="loading",b="modal",v="proxy",G="resizable",Q="resizableInstance",e="stack",H="width",T="resize:resize",l="resize:end",J=S.ClassNameManager.getClassName,K=J(Z,u),d=J(Z,u,C),p=J(Z,u,n),B=J(Z,o),W=J(f,Y),R=J(F),g=document.createTextNode(""),k='<button class="'+K+'"></button>',t='<div class="'+d+'"></div>';var U=function(A){if(!S.DialogMask){S.DialogMask=new S.OverlayMask().render();}};S.mix(U,{NAME:Z,ATTRS:{bodyContent:{value:g},buttons:{value:[],validator:c},close:{value:true},constrain2view:{value:false,validator:i},destroyOnClose:{value:false,validator:i},draggable:{lazyAdd:true,value:true,setter:function(A){return this._setDraggable(A);}},dragInstance:{value:null},modal:{setter:function(A){return this._setModal(A);},lazyAdd:false,value:false,validator:i},resizable:{setter:function(A){return this._setResizable(A);},value:true},resizableInstance:{value:null},stack:{lazyAdd:true,value:true,setter:function(A){return this._setStack(A);},validator:i}}});U.prototype={initializer:function(w){var A=this;var x=A.get(D);var z=A.get(r);var y=A.get(E);if(y&&y.length&&!A.get(I)){A.set(I,g);}if(z){var L={icon:r,id:r,handler:{fn:A.close,context:A}};if(x){x.push(L);}A.set(D,x);}A.after("render",A._afterRenderer);},bindUI:function(){var A=this;A._bindLazyComponents();A.publish("close",{defaultFn:A._close});A.on("visibleChange",A._afterSetVisible);},destructor:function(){var A=this;var L=A.get(q);S.Event.purgeElement(L,true);},_bindLazyComponents:function(){var A=this;var L=A.get(q);L.on("mouseenter",S.bind(A._initLazyComponents,A));},close:function(){var A=this;A.fire("close");},_afterRenderer:function(L){var A=this;A._initButtons();A.get(e);A.get(V);},_close:function(){var A=this;if(A.get(s)){A.destroy();}else{A.hide();}if(A.get(b)){S.DialogMask.hide();}},_initButtons:function(){var A=this;var w=A.get(E);var L=S.Node.create(t);var x=S.Node.create(k);S.each(w,function(z,y){var AA=x.cloneNode();if(z.isDefault){AA.addClass(p);}if(z.handler){AA.on("click",z.handler,A);}AA.html(z.text||X);L.append(AA);});if(w.length){A.set(I,L);}},_initLazyComponents:function(){var A=this;if(!A.get(N)&&A.get(P)){A.get(P);}if(!A.get(Q)&&A.get(G)){A.get(G);}},_setDraggable:function(y){var A=this;var w=A.get(q);var x=function(){var AB=A.get(N);if(AB){AB.destroy();AB.unplug(S.Plugin.DDConstrained);}};S.DD.DDM.CSS_PREFIX=R;if(y){var z={node:w,handles:[a+B]};var L=S.merge(z,y||{});if(L.on){S.each(L.on,function(AC,AB){L.on[AB]=S.bind(AC,A);});}x();var AA=new S.DD.Drag(L);AA.plug(S.Plugin.DDConstrained,{constrain2view:A.get(j)});A.set(N,AA);}else{x();}return y;},_setModal:function(L){var A=this;if(L){S.DialogMask.show();}else{S.DialogMask.hide();}return L;},_setResizable:function(y){var A=this;var z=A.get(Q);var x=function(){if(z){z.destroy();}};if(y){var w=function(AB){var AA=AB.type;var AC=AB.info;if((AA==l)||((AA==T)&&!AB.currentTarget.get(v))){A.set(h,AC.height);A.set(H,AC.width);}};x();var L=new S.Resize(S.merge({handles:"r,br,b",minHeight:100,minWidth:200,constrain2view:true,node:A.get(q),proxy:true},y||{}));L.after("end",w);L.after("resize",w);A.set(Q,L);return y;}else{x();}},_setStack:function(L){var A=this;if(L){S.DialogManager.register(A);}else{S.DialogManager.remove(A);}return L;},_afterSetVisible:function(L){var A=this;if(A.get(b)){if(L.newVal){S.DialogMask.show();}else{S.DialogMask.hide();}}}};S.Dialog=S.Base.build(Z,S.Panel,[U,S.WidgetPosition,S.WidgetStack,S.WidgetPositionAlign]);S.DialogManager=new S.OverlayManager({zIndexBase:1000});S.mix(S.DialogManager,{findByChild:function(A){return S.Widget.getByNode(A);},closeByChild:function(A){return S.DialogManager.findByChild(A).close();},refreshByChild:function(L){var A=S.DialogManager.findByChild(L);if(A&&A.io){A.io.start();}}});},"1.0pr",{requires:["aui-panel","dd-constrain","aui-button","aui-overlay-manager","aui-overlay-mask","aui-io-plugin","aui-resize"],skinnable:true});