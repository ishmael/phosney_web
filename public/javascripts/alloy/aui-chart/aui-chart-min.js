AUI.add("aui-chart",function(X){var G=X.Lang,R=X.ClassNameManager.getClassName,K="chart",W=R(K);AUI.namespace("_CHART");var c=function(){c.superclass.constructor.apply(this,arguments);};c.NAME=K;c.ATTRS={type:{value:"pie"},dataSource:{value:null},altText:{getter:"_getAltText",setter:"_setAltText"},swfURL:{valueFn:function(){return AUI.defaults.chart.swfURL;}},swfCfg:{value:{}},request:{value:"*"},dataSource:{value:null},series:{value:null},categoryNames:{getter:"_getCategoryNames",setter:"_setCategoryNames"},dataTipFunction:{setter:"_setDataTipFunction"},legendLabelFunction:{setter:"_setLegendLabelFunction"},style:{value:null},pollingInterval:{value:0}};X.extend(c,X.Component,{renderUI:function(){var n=this;var A={align:"",allowNetworking:"",allowScriptAccess:"",base:"",bgcolor:"",menu:"",name:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};var m=n.get("contentBox");var h={boundingBox:m,fixedAttributes:{allowScriptAccess:"always"},flashVars:{allowedDomain:document.location.hostname},backgroundColor:m.getComputedStyle("backgroundColor"),url:n.get("swfURL"),height:n.get("height"),width:n.get("width"),version:9.045};var o=n.get("swfCfg");for(var k in o){if(A.hasOwnProperty(k)){h.fixedAttributes[k]=o[k];}else{h[k]=o[k];}}var l=h.version;if(l&&G.isValue(l)&&l!="undefined"){var j=(/\w*.\w*/.exec(((l).toString()).replace(/.0./g,"."))).toString();var g=j.split(".");l=g[0]+".";switch((g[1].toString()).length){case 1:l+="00";break;case 2:l+="0";break;}l+=g[1];h.version=parseFloat(l);}n._swfWidget=new X.SWF(h);n._swfNode=n._swfWidget._swf;n._swf=n._swfNode.getDOM();n._swfWidget.on("swfReady",n._eventHandler,n);n.set("swfCfg",h);},bindUI:function(){var A=this;A.publish("itemMouseOver");A.publish("itemMouseOut");A.publish("itemClick");A.publish("itemDblClick");A.publish("itemDragStart");A.publish("itemDragEnd");A.publish("itemDrag");A.after("seriesChange",A.refreshData);A.after("dataSourceChange",A.refreshData);A.after("pollingIntervalChange",A.refreshData);var g=A.get("dataSource");g.after("response",A._loadDataHandler,A);},setStyle:function(g,h){var A=this;h=X.JSON.stringify(h);A._swf.setStyle(g,h);},setStyles:function(g){var A=this;g=X.JSON.stringify(g);A._swf.setStyles(g);},setSeriesStyles:function(h){var A=this;for(var g=0;g<h.length;g++){h[g]=X.JSON.stringify(h[g]);}A._swf.setSeriesStyles(h);},_eventHandler:function(g){var A=this;if(g.type=="swfReady"){A._swfNode=A._swfWidget._swf;A._swf=A._swfNode.getDOM();A._loadHandler();A.fire("contentReady");}},_loadHandler:function(){var A=this;if(A._swf&&A._swf.setType){A._swf.setType(A.get("type"));var g=A.get("style");if(g){A.setStyles(g);}A._syncChartAttrs();A._initialized=true;A.refreshData();}},_syncChartAttrs:function(){var A=this;var g=A._originalConfig;if(g.categoryNames){A.set("categoryNames",g.categoryNames);}if(g.dataTipFunction){A.set("dataTipFunction",g.dataTipFunction);}if(g.legendLabelFunction){A.set("legendLabelFunction",g.legendLabelFunction);}if(g.series){A.set("series",g.series);}},refreshData:function(){var A=this;if(A._initialized){var j=A.get("dataSource");if(j){var g=A._pollingID;if(g!==null){j.clearInterval(g);A._pollingID=null;}var i=A.get("pollingInterval");var h=A.get("request");if(i>0){A._pollingID=j.setInterval(i,h);}j.sendRequest(h);}}},_loadDataHandler:function(g){var s=this;if(s._swf&&!g.error){var q=s._seriesFunctions;if(q){for(var n=0;n<q.length;n++){c.removeProxyFunction(q[n]);}s._seriesFunctions=null;}s._seriesFunctions=[];var k=[];var j=0;var t=null;var A=s.get("series");if(A!==null){j=A.length;for(var n=0;n<j;n++){t=A[n];var h={};for(var r in t){if(r=="style"){if(t.style!==null){h.style=X.JSON.stringify(t.style);}}else{if(r=="labelFunction"){if(t.labelFunction!==null){h.labelFunction=c.getFunctionReference(t.labelFunction);s._seriesFunctions.push(h.labelFunction);}}else{if(r=="dataTipFunction"){if(t.dataTipFunction!==null){h.dataTipFunction=c.getFunctionReference(t.dataTipFunction);s._seriesFunctions.push(h.dataTipFunction);}}else{if(r=="legendLabelFunction"){if(t.legendLabelFunction!==null){h.legendLabelFunction=c.getFunctionReference(t.legendLabelFunction);s._seriesFunctions.push(h.legendLabelFunction);}}else{h[r]=t[r];}}}}}k.push(h);}}var p=s.get("type");var m=g.response.results;if(j>0){for(var n=0;n<j;n++){t=k[n];if(!t.type){t.type=p;}t.dataProvider=m;}}else{var l={type:p,dataProvider:m};k.push(l);}try{if(s._swf.setDataProvider){s._swf.setDataProvider(k);}}catch(o){s._swf.setDataProvider(k);}}},_getCategoryNames:function(){var A=this;return A._swf.getCategoryNames();},_setCategoryNames:function(g){var A=this;A._swf.setCategoryNames(g);return g;},_setDataTipFunction:function(g){var A=this;if(A._dataTipFunction){c.removeProxyFunction(A._dataTipFunction);}if(g){A._dataTipFunction=g=c.getFunctionReference(g);}A._swf.setDataTipFunction(g);return g;},_setLegendLabelFunction:function(g){var A=this;if(A._legendLabelFunction){c.removeProxyFunction(A._legendLabelFunction);}if(g){A._legendLabelFunction=g=c.getFunctionReference(g);}A._swf.setLegendLabelFunction(g);return g;},_getAltText:function(){var A=this;return A._swf.getAltText();},_setAltText:function(){var A=this;A._swf.setAltText(value);return value;},_pollingID:null});c.proxyFunctionCount=0;c.createProxyFunction=function(h,g){var A=c.proxyFunctionCount;var i="proxyFunction"+A;AUI._CHART[i]=X.bind(h,g);c.proxyFunctionCount++;return"AUI._CHART."+i;};c.getFunctionReference=function(h){var A=this;if(G.isFunction(h)){h=c.createProxyFunction(h);}else{if(h.fn&&G.isFunction(h.fn)){var g=[h.fn];if(h.context&&G.isObject(context)){g.push(h.context);}h=c.createProxyFunction(A,g);}}return h;};c.removeProxyFunction=function(A){if(A&&A.indexOf("AUI._CHART.proxyFunction")>-1){A=A.substr(12);AUI._CHART[A]=null;}};X.Chart=c;var G=X.Lang,R=X.ClassNameManager.getClassName,K="piechart";var P=function(){P.superclass.constructor.apply(this,arguments);};P.NAME=K;P.ATTRS={dataField:{getter:"_getDataField",setter:"_setDataField",validator:G.isString},categoryField:{getter:"_getCategoryField",setter:"_setCategoryField",validator:G.isString}};
X.extend(P,X.Chart,{_syncChartAttrs:function(){var A=this;P.superclass._syncChartAttrs.apply(A,arguments);var g=A._originalConfig;if(g.dataField){A.set("dataField",g.dataField);}if(g.categoryField){A.set("categoryField",g.categoryField);}},_getDataField:function(){var A=this;return A._swf.getDataField();},_setDataField:function(g){var A=this;A._swf.setDataField(g);return g;},_getCategoryField:function(){var A=this;return A._swf.getCategoryField();},_setCategoryField:function(g){var A=this;A._swf.setCategoryField(g);return g;}});X.PieChart=P;var G=X.Lang,R=X.ClassNameManager.getClassName,K="cartesianchart",J=R(K);var E=function(){E.superclass.constructor.apply(this,arguments);};E.NAME=K;E.ATTRS={xField:{getter:"_getXField",setter:"_setXField",validator:G.isString},yField:{getter:"_getYField",setter:"_setYField",validator:G.isString},xAxis:{setter:"_setXAxis"},xAxes:{setter:"_setXAxes"},yAxis:{setter:"_setYAxis"},yAxes:{setter:"_setYAxes"},constrain2view:{setter:"_setConstrain2view"}};X.extend(E,X.Chart,{destructor:function(){var A=this;A._removeAxisFunctions(A._xAxisLabelFunctions);A._removeAxisFunctions(A._yAxisLabelFunctions);},_syncChartAttrs:function(){var A=this;E.superclass._syncChartAttrs.apply(A,arguments);var g=A._originalConfig;if(g.xField){A.set("xField",g.xField);}if(g.yField){A.set("yField",g.yField);}if(g.xAxis){A.set("xAxis",g.xAxis);}if(g.yAxis){A.set("yAxis",g.yAxis);}if(g.xAxes){A.set("xAxes",g.xAxes);}if(g.yAxes){A.set("yAxes",g.yAxes);}if(g.constrain2view){A.set("constrain2view",g.constrain2view);}},_getXField:function(){var A=this;return A._swf.getHorizontalField();},_setXField:function(g){var A=this;A._swf.setHorizontalField(g);return g;},_getYField:function(){var A=this;return A._swf.getVerticalField();},_setYField:function(g){var A=this;A._swf.setVerticalField(g);return g;},_getClonedAxis:function(h){var A=this;var j={};for(var g in h){if(g=="labelFunction"){if(h.labelFunction&&h.labelFunction!==null){j.labelFunction=c.getFunctionReference(h.labelFunction);}}else{j[g]=h[g];}}return j;},_setXAxis:function(g){var A=this;if(g.position!="bottom"&&g.position!="top"){g.position="bottom";}A._removeAxisFunctions(A._xAxisLabelFunctions);g=A._getClonedAxis(g);A._xAxisLabelFunctions.push(g.labelFunction);A._swf.setHorizontalAxis(g);return g;},_setXAxes:function(h){var A=this;A._removeAxisFunctions(A._xAxisLabelFunctions);for(var g=0;g<h.length;g++){var j=h[g];if(j.position=="left"){j.position="bottom";}h[g]=A._getClonedAxis(j);j=h[g];if(j.labelFunction){A._xAxisLabelFunctions.push(j.labelFunction);}A._swf.setHorizontalAxis(j);}},_setYAxis:function(g){var A=this;A._removeAxisFunctions(A._yAxisLabelFunctions);g=A._getClonedAxis(g);A._yAxisLabelFunctions.push(g.labelFunction);A._swf.setVerticalAxis(g);},_setYAxes:function(h){var A=this;A._removeAxisFunctions(A._yAxisLabelFunctions);for(var g=0;g<h.length;g++){h[g]=A._getClonedAxis(h[g]);var j=h[g];if(j.labelFunction){A._yAxisLabelFunctions.push(j.labelFunction);}A._swf.setVerticalAxis(j);}},_setConstrain2view:function(g){var A=this;A._swf.setConstrainViewport(g);},setSeriesStylesByIndex:function(g,h){var A=this;if(A._swf&&A._swf.setSeriesStylesByIndex){h=X.JSON.stringify(h);A._swf.setSeriesStylesByIndex(g,h);}},_removeAxisFunctions:function(j){var g=this;if(j&&j.length){for(var h=0;h<j.length;h++){var A=j[h];if(A){X.Chart.removeProxyFunction(A);}}j=[];}},_xAxisLabelFunctions:[],_yAxisLabelFunctions:[]});X.CartesianChart=E;var G=X.Lang,R=X.ClassNameManager.getClassName,K="linechart",Y=R(K);var B=function(){B.superclass.constructor.apply(this,arguments);};B.NAME=K;B.ATTRS={type:{value:"line"}};X.extend(B,X.CartesianChart);X.LineChart=B;var G=X.Lang,R=X.ClassNameManager.getClassName,K="columnchart",M=R(K);var b=function(){b.superclass.constructor.apply(this,arguments);};b.NAME=K;b.ATTRS={type:{value:"column"}};X.extend(b,X.CartesianChart);X.ColumnChart=b;var G=X.Lang,R=X.ClassNameManager.getClassName,K="barchart",Q=R(K);var U=function(){U.superclass.constructor.apply(this,arguments);};U.NAME=K;U.ATTRS={type:{value:"bar"}};X.extend(U,X.CartesianChart);X.BarChart=U;var G=X.Lang,R=X.ClassNameManager.getClassName,K="stackedcolumnchart",f=R(K);var e=function(){e.superclass.constructor.apply(this,arguments);};e.NAME=K;e.ATTRS={type:{value:"stackcolumn"}};X.extend(e,X.CartesianChart);X.StackedColumnChart=e;var G=X.Lang,R=X.ClassNameManager.getClassName,K="stackedbarchart",I=R(K);var L=function(){L.superclass.constructor.apply(this,arguments);};L.NAME=K;L.ATTRS={type:{value:"stackbar"}};X.extend(L,X.CartesianChart);X.StackedBarChart=L;var O=function(){};O.prototype={type:null,reverse:false,labelFunction:null,labelSpacing:2,title:null};X.Chart.Axis=O;var T=function(){T.superclass.constructor.apply(this,arguments);};X.extend(T,O,{type:"numeric",minimum:NaN,maximum:NaN,majorUnit:NaN,minorUnit:NaN,snapToUnits:true,stackingEnabled:false,alwaysShowZero:true,scale:"linear",roundMajorUnit:true,calculateByLabelSize:true,position:"left",adjustMaximumByMajorUnit:true,adjustMinimumByMajorUnit:true});X.Chart.NumericAxis=T;var D=function(){D.superclass.constructor.apply(this,arguments);};X.extend(D,O,{type:"time",minimum:null,maximum:null,majorUnit:NaN,majorTimeUnit:null,minorUnit:NaN,minorTimeUnit:null,snapToUnits:true,stackingEnabled:false,calculateByLabelSize:true});X.Chart.TimeAxis=D;var F=function(){F.superclass.constructor.apply(this,arguments);};X.extend(F,O,{type:"category",categoryNames:null,calculateCategoryCount:false});X.Chart.CategoryAxis=F;var N=function(){};N.prototype={type:null,displayName:null};X.Chart.Series=N;var d=function(){d.superclass.constructor.apply(this,arguments);};X.extend(d,N,{xField:null,yField:null,axis:"primary",showInLegend:true});X.Chart.CartesianSeries=d;var C=function(){C.superclass.constructor.apply(this,arguments);};X.extend(C,d,{type:"column"});X.Chart.ColumnSeries=C;var S=function(){S.superclass.constructor.apply(this,arguments);};X.extend(S,d,{type:"line"});X.Chart.LineSeries=S;var Z=function(){Z.superclass.constructor.apply(this,arguments);
};X.extend(Z,d,{type:"bar"});X.Chart.BarSeries=Z;var a=function(){a.superclass.constructor.apply(this,arguments);};X.extend(a,N,{type:"pie",dataField:null,categoryField:null,labelFunction:null});X.Chart.PieSeries=a;var H=function(){H.superclass.constructor.apply(this,arguments);};X.extend(H,d,{type:"stackbar"});X.Chart.StackedBarSeries=H;var V=function(){V.superclass.constructor.apply(this,arguments);};X.extend(V,d,{type:"stackcolumn"});X.Chart.StackedColumnSeries=V;},"1.0pr",{skinnable:false,requires:["datasource","aui-swf","json"]});